server:
  port: 8090

spring:
  application:
    name: ai-scene-backend
  datasource:
    # Self-hosted Postgres Connection
    url: ${SPRING_DATASOURCE_URL}
    username: ${SPRING_DATASOURCE_USERNAME}
    password: ${SPRING_DATASOURCE_PASSWORD}
    driver-class-name: org.postgresql.Driver
  jpa:
    hibernate:
      ddl-auto: validate # Ops Rule: Use Flyway for migration, Hibernate only validates
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
    show-sql: true
  flyway:
    enabled: true
    baseline-on-migrate: true
  servlet:
    multipart:
      max-file-size: 500MB
      max-request-size: 500MB
  
  # Self-hosted Redis Configuration
  data:
    redis:
      url: ${SPRING_REDIS_URL}

# Actuator Configuration
management:
  endpoints:
    web:
      exposure:
        include: health, info
  endpoint:
    health:
      show-details: always
      probes:
        enabled: true

# Supabase Storage (S3 Compatible) Configuration
supabase:
  storage:
    region: ${SUPABASE_STORAGE_REGION:us-east-1}
    endpoint: ${SUPABASE_STORAGE_ENDPOINT}
    access-key: ${SUPABASE_STORAGE_ACCESS_KEY}
    secret-key: ${SUPABASE_STORAGE_SECRET_KEY}
    bucket: ${SUPABASE_STORAGE_BUCKET}
    public-url: ${SUPABASE_STORAGE_PUBLIC_URL}
